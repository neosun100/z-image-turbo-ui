# Z-Image-Turbo Web UI

<div align="center">

![Z-Image-Turbo インターフェース](https://img.aws.xin/uPic/J23yjV.png)

[![License](https://img.shields.io/badge/License-Apache%202.0-green)](LICENSE)
[![Model](https://img.shields.io/badge/Model-Z--Image--Turbo-blue)](https://huggingface.co/Tongyi-MAI/Z-Image-Turbo)
[![Python](https://img.shields.io/badge/Python-3.8+-blue)](https://www.python.org/)
[![Node](https://img.shields.io/badge/Node-16+-green)](https://nodejs.org/)

### 🌍 Language / 言語

**[English](README.md)** | **[简体中文](README_zh-CN.md)** | **[繁體中文](README_zh-TW.md)** | **日本語**

---

### 🚀 Tongyi-MAI Z-Image-Turbo プロフェッショナル Web UI
51+ の解像度プリセットで超高速テキスト to 画像生成

</div>

---

## ✨ 主な機能

### 🎨 インターフェース機能
- **🌓 デュアルテーマモード** - ダーク/ライトモードを自由に切り替え、異なる使用シーンに対応
- **🌍 多言語サポート** - 簡体字中国語、繁体字中国語、英語、日本語、ブラウザ言語の自動検出
- **📐 豊富な解像度プリセット** - 51+ 種類のプリセット解像度、すべての一般的な比率をカバー
  - 正方形 (1:1): 512×512 → 2048×2048
  - 縦画面 (3:4): 768×1024 → 1728×2304
  - 横画面 (4:3): 1024×768 → 2304×1728
  - ワイドスクリーン横 (16:9): 1280×720 → 3200×1800
  - ワイドスクリーン縦 (9:16): 720×1280 → 1800×3200
  - ウルトラワイド横 (21:9): 1344×576 → 2352×1008
  - ウルトラワイド縦 (9:21): 576×1344 → 1008×2352
  - 超ワイド横 (32:9): 1792×512 → 3200×912
  - 超ワイド縦 (9:32): 512×1792 → 912×3200
- **🎯 カスタム解像度** - 256-4096 範囲内の任意の 16 の倍数解像度をサポート
- **🖼️ 高度な画像ビューア** - クリックで拡大、左右切り替え、キーボードショートカット（←/→/Esc）
- **📥 バッチダウンロード** - ワンクリックで生成されたすべての画像をダウンロード
- **⚡ リアルタイム進行状況** - リアルタイムログストリーム、進行状況バー、経過時間表示
- **📊 モデル情報パネル** - モデルパラメータ、VRAM 使用量、推奨設定などの詳細情報を表示
- **📜 履歴記録** - 生成履歴を自動保存、パラメータの迅速な再利用

### 🤖 モデル機能
- **⚡ 超高速** - 8 ステップ推論、エンタープライズ級 GPU でサブ秒レイテンシ
- **🏗️ S3-DiT アーキテクチャ** - スケーラブルシングルストリーム拡散 Transformer ベース
- **🧠 高度なエンコーダ** - Qwen 4B テキストエンコーダ + Flux VAE 画像デコーダ
- **🎓 DMDR トレーニング** - DMD と強化学習を融合したトレーニング方法
- **🌐 バイリンガル習熟** - 優れた中国語と英語のテキストレンダリング能力
- **🎨 多様なスタイル** - フォトリアリズムからアニメまで、検閲なし
- **📐 高忠実度** - 最大 2MP 解像度をネイティブサポート
- **💾 高効率** - 6B パラメータ、16GB VRAM で実行可能

## 🚀 クイックスタート

### 前提条件
- Python 3.8+
- Node.js 16+
- 8GB+ VRAM 推奨（または CPU オフロード使用）
- Docker（オプション、本番環境推奨）

### 方法1：Docker デプロイ（推奨）

```bash
# 1. リポジトリをクローン
git clone https://github.com/neosun100/z-image-turbo-ui.git
cd z-image-turbo-ui

# 2. Docker イメージをビルド
docker build -t z-image-turbo .

# 3. コンテナを実行（すべての GPU を使用）
docker run -d --name z-image-turbo \
  --gpus all \
  -p 8888:8000 \
  -v ~/.cache/huggingface:/models \
  z-image-turbo

# 4. コンテナを実行（特定の GPU、例：GPU 2）
docker run -d --name z-image-turbo \
  --gpus '"device=2"' \
  -p 8888:8000 \
  -v ~/.cache/huggingface:/models \
  z-image-turbo
```

`http://localhost:8888` にアクセスして開始！

### 方法2：ローカル開発

```bash
# 1. リポジトリをクローン
git clone https://github.com/neosun100/z-image-turbo-ui.git
cd z-image-turbo-ui

# 2. バックエンドセットアップ
python -m venv venv
source venv/bin/activate  # Windows: .\venv\Scripts\activate
pip install -r requirements.txt

# 3. フロントエンドセットアップ
cd frontend
npm install
npm run build
cd ..

# 4. バックエンド起動
cd backend
python main.py
```

`http://localhost:8000` にアクセスして開始！

## 📖 使用ガイド

### 基本操作
1. **プロンプトを入力** - 下部のテキストボックスにクリエイティブな説明を入力
2. **解像度を選択** - 51+ のプリセットから選択、またはカスタマイズ
3. **パラメータを調整** - 推論ステップ（8 推奨）、ガイダンススケール、シード
4. **バッチ生成** - 一度に最大 12 枚の画像を生成
5. **生成をクリック** - リアルタイムで進行状況とログを確認

### 高度な機能
- **プロンプト強化** - 品質向上キーワードを自動追加
- **ネガティブプロンプト** - 避けたい要素を指定
- **固定シード** - 特定のシード値で結果を再現
- **画像ビューア** - 画像をクリックしてフルスクリーン、←/→ キーでナビゲート
- **バッチダウンロード** - 「すべてダウンロード」をクリックしてすべての画像を保存
- **履歴** - 履歴エントリをクリックして以前のパラメータを迅速に再利用

### ショートカットキー
- **←** - 前の画像（フルスクリーンモード）
- **→** - 次の画像（フルスクリーンモード）
- **Esc** - フルスクリーンモードを終了

## ⚙️ 設定

### VRAM 最適化
CUDA OOM エラーが発生した場合：
1. バッチサイズを減らす
2. 解像度を下げる
3. より多くの空き VRAM を持つ GPU を指定
4. CPU オフロードを有効化（設定パネル経由）

### モデルキャッシュ
デフォルトのキャッシュ場所：`~/.cache/huggingface`

環境変数で変更：
```bash
export HF_HOME=/path/to/your/cache
```

## 🛠️ 技術スタック

### バックエンド
- **FastAPI** - 高性能非同期 Web フレームワーク
- **PyTorch** - ディープラーニングフレームワーク
- **Diffusers** - Hugging Face 拡散モデルライブラリ
- **Transformers** - 事前学習済みモデルライブラリ

### フロントエンド
- **React** - UI ライブラリ
- **Vite** - モダンフロントエンドビルドツール
- **Lucide React** - 美しいアイコンライブラリ

### モデル
- **Z-Image-Turbo** - Tongyi-MAI 6B パラメータテキスト to 画像モデル
- **アーキテクチャ** - S3-DiT (Scalable Single-Stream DiT)
- **テキストエンコーダ** - Qwen 4B
- **VAE** - Flux Autoencoder

## 📊 パフォーマンス指標

| 指標 | 値 |
|------|-----|
| モデルパラメータ | 6B |
| 推奨ステップ数 | 8 NFEs |
| VRAM 使用量 | 12-16 GB |
| 最大解像度 | 2MP (例：2048×2048) |
| サポート解像度 | 256-4096 (16 の倍数) |
| 生成速度 | <1s (エンタープライズ GPU) |

## 🎯 ベストプラクティス

### プロンプトのヒント
- **具体的に** - シーン、スタイル、詳細の詳細な説明
- **キーワードを使用** - 「masterpiece」、「highly detailed」、「8k」など
- **スタイルを指定** - 「photorealistic」、「anime style」、「oil painting」など
- **バイリンガル** - モデルは中国語と英語の両方をサポート

### パラメータ調整
- **推論ステップ** - 8 ステップが最適、多ければ良いとは限らない
- **ガイダンススケール** - 0.0 推奨、高すぎると過飽和になる可能性
- **ランダムシード** - -1 でランダム、固定値で再現性
- **解像度** - テスト用に小さく始め、満足したら増やす

## 🐛 トラブルシューティング

### よくある問題

**Q: CUDA out of memory エラー**
```
A: 1. nvidia-smi で GPU 使用状況を確認
   2. 空き GPU を指定: --gpus '"device=X"'
   3. バッチサイズまたは解像度を減らす
```

**Q: 生成速度が遅い**
```
A: 1. GPU（CPU ではなく）が使用されていることを確認
   2. GPU ドライバと CUDA バージョンを確認
   3. 推論ステップを減らす（8 ステップで十分）
```

**Q: 画像品質が悪い**
```
A: 1. より詳細なプロンプトで最適化
   2. 「プロンプト強化」オプションを有効化
   3. 異なるランダムシードを試す
   4. ネガティブプロンプトで不要な要素を除外
```

**Q: UI 表示の問題**
```
A: 1. ブラウザキャッシュをクリア
   2. テーマモードの切り替えを試す
   3. ブラウザコンソールでエラーを確認
```

## 📝 変更履歴

### v2.0.0 (2025-11-30)
- ✨ ダーク/ライトデュアルテーマモードを追加
- 🌍 ブラウザ言語の自動検出
- 📐 51+ の解像度プリセットに拡張
- 🖼️ 高度な画像ビューア（ナビゲーション、キーボードショートカット）
- 📥 バッチダウンロード機能
- ⚡ リアルタイム進行状況とログストリーミング
- 📊 モデル情報パネル
- 🎨 包括的な UI 最適化とレスポンシブ改善
- 🐛 複数の表示とパフォーマンスの問題を修正

## 🤝 貢献

Issue と Pull Request を歓迎します！

## 📄 ライセンス

このプロジェクトは Apache 2.0 ライセンスの下でライセンスされています - [LICENSE](LICENSE) ファイルを参照

## 🙏 謝辞

- **モデル** - [Tongyi-MAI/Z-Image-Turbo](https://huggingface.co/Tongyi-MAI/Z-Image-Turbo) by Alibaba Group
- **UI フレームワーク** - React + Vite
- **バックエンドフレームワーク** - FastAPI + Diffusers

---

<div align="center">

**⭐ このプロジェクトが役に立ったら、Star をください！**

</div>
